{"ast":null,"code":"var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\n\nfunction useFetchAirtableData(initialValue, requestParams) {\n  _s();\n\n  const [fetchError, setSetchError] = useState(false);\n  const [fetchLoading, setFetchLoading] = useState(true);\n  const [data, setData] = useState(initialValue);\n  useEffect(() => {\n    try {\n      async function fetchData(_ref) {\n        let {\n          url,\n          headers\n        } = _ref;\n        let fetching = true;\n        let records = [];\n\n        while (fetching) {\n          const response = await fetch(url, {\n            headers: headers\n          });\n          const jsonResponse = await response.json();\n          records.push(...jsonResponse.records);\n          if (!jsonResponse.offset) fetching = false;else {\n            url = url.split('&offset')[0];\n            url += `&offset=${jsonResponse.offset}`;\n          }\n        }\n\n        setData(records.map(record => record.fields));\n        setFetchLoading(false);\n      }\n\n      fetchData(requestParams);\n    } catch (error) {\n      setSetchError(error);\n    }\n  }, [requestParams]);\n  return {\n    fetchError,\n    fetchLoading,\n    data,\n    setData\n  };\n}\n\n_s(useFetchAirtableData, \"ZzMGkTyKwLOIGGkDqBSbT5Ln7AA=\");\n\nfunction useCallHHAPI(schedules, setSchedules) {\n  _s2();\n\n  // States\n  const [scheduleLoading, setScheduleLoading] = useState(false);\n  const [scheduleError, setScheduleError] = useState(false); // API call function\n\n  const makeSchedules = async (url, body_request) => {\n    setScheduleLoading(true);\n\n    try {\n      const response = await fetch(url, {\n        method: \"POST\",\n        mode: \"cors\",\n        headers: {\n          \"Content-type\": \"application/json\",\n          'Accept': 'application/json'\n        },\n        body: JSON.stringify(body_request)\n      });\n      const jsonResponse = await response.json();\n      setSchedules(jsonResponse);\n    } catch (error) {\n      setScheduleError(error);\n    }\n\n    setScheduleLoading(false);\n  };\n\n  return {\n    scheduleLoading,\n    scheduleError,\n    makeSchedules\n  };\n}\n\n_s2(useCallHHAPI, \"yz1CuZzkNk+rrrGyqMC4r85zteU=\");\n\nexport { useFetchAirtableData, useCallHHAPI };","map":{"version":3,"names":["useState","useEffect","useFetchAirtableData","initialValue","requestParams","fetchError","setSetchError","fetchLoading","setFetchLoading","data","setData","fetchData","url","headers","fetching","records","response","fetch","jsonResponse","json","push","offset","split","map","record","fields","error","useCallHHAPI","schedules","setSchedules","scheduleLoading","setScheduleLoading","scheduleError","setScheduleError","makeSchedules","body_request","method","mode","body","JSON","stringify"],"sources":["/home/bubu/dev/dci-projects/hacedor_de_horarios_frontend/src/Components/Contexts/customHooks.js"],"sourcesContent":["import { useState, useEffect } from \"react\"\n\nfunction useFetchAirtableData(initialValue, requestParams) {\n\tconst [fetchError, setSetchError] = useState(false)\n\tconst [fetchLoading, setFetchLoading] = useState(true)\n\tconst [data, setData] = useState(initialValue)\n\n\tuseEffect(() => {\n\t\ttry {\n\n\t\t\tasync function fetchData({ url, headers }) {\n\t\t\t\tlet fetching = true\n\t\t\t\tlet records = []\n\t\t\t\twhile (fetching) {\n\t\t\t\t\tconst response = await fetch(url, {\n\t\t\t\t\t\theaders: headers\n\t\t\t\t\t})\n\t\t\t\t\tconst jsonResponse = await response.json()\n\t\t\t\t\trecords.push(...jsonResponse.records)\n\t\t\t\t\tif (!jsonResponse.offset) fetching = false\n\t\t\t\t\telse {\n\t\t\t\t\t\turl = url.split('&offset')[0]\n\t\t\t\t\t\turl += `&offset=${jsonResponse.offset}`\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tsetData(records.map(record => record.fields))\n\t\t\t\tsetFetchLoading(false)\n\t\t\t}\n\t\t\tfetchData(requestParams)\n\t\t} catch (error) {\n\t\t\tsetSetchError(error)\n\t\t}\n\t}, [requestParams])\n\t\n\treturn {\n\t\tfetchError,\n\t\tfetchLoading,\n\t\tdata,\n\t\tsetData\n\t}\n}\n\nfunction useCallHHAPI(schedules, setSchedules) {\n\t// States\n\tconst [scheduleLoading, setScheduleLoading] = useState(false)\n\tconst [scheduleError, setScheduleError] = useState(false)\n\t// API call function\n\tconst makeSchedules = async (url, body_request) => {\n\t\tsetScheduleLoading(true)\n\t\ttry {\n\t\t\t\tconst response = await fetch(url, {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tmode:\"cors\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-type\": \"application/json\",\n\t\t\t\t\t'Accept': 'application/json'\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify(body_request)\n\t\t\t})\n\t\t\t\n\t\t\tconst jsonResponse = await response.json()\n\t\t\tsetSchedules(jsonResponse)\n\t\t} catch (error) {\n\t\t\tsetScheduleError(error)\n\t\t}\n\t\tsetScheduleLoading(false)\n\t}\n\n\treturn {\n\t\tscheduleLoading,\n\t\tscheduleError,\n\t\tmakeSchedules\n\t}\n}\n\n\nexport { useFetchAirtableData, useCallHHAPI }"],"mappings":";;;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;;AAEA,SAASC,oBAAT,CAA8BC,YAA9B,EAA4CC,aAA5C,EAA2D;EAAA;;EAC1D,MAAM,CAACC,UAAD,EAAaC,aAAb,IAA8BN,QAAQ,CAAC,KAAD,CAA5C;EACA,MAAM,CAACO,YAAD,EAAeC,eAAf,IAAkCR,QAAQ,CAAC,IAAD,CAAhD;EACA,MAAM,CAACS,IAAD,EAAOC,OAAP,IAAkBV,QAAQ,CAACG,YAAD,CAAhC;EAEAF,SAAS,CAAC,MAAM;IACf,IAAI;MAEH,eAAeU,SAAf,OAA2C;QAAA,IAAlB;UAAEC,GAAF;UAAOC;QAAP,CAAkB;QAC1C,IAAIC,QAAQ,GAAG,IAAf;QACA,IAAIC,OAAO,GAAG,EAAd;;QACA,OAAOD,QAAP,EAAiB;UAChB,MAAME,QAAQ,GAAG,MAAMC,KAAK,CAACL,GAAD,EAAM;YACjCC,OAAO,EAAEA;UADwB,CAAN,CAA5B;UAGA,MAAMK,YAAY,GAAG,MAAMF,QAAQ,CAACG,IAAT,EAA3B;UACAJ,OAAO,CAACK,IAAR,CAAa,GAAGF,YAAY,CAACH,OAA7B;UACA,IAAI,CAACG,YAAY,CAACG,MAAlB,EAA0BP,QAAQ,GAAG,KAAX,CAA1B,KACK;YACJF,GAAG,GAAGA,GAAG,CAACU,KAAJ,CAAU,SAAV,EAAqB,CAArB,CAAN;YACAV,GAAG,IAAK,WAAUM,YAAY,CAACG,MAAO,EAAtC;UACA;QACD;;QACDX,OAAO,CAACK,OAAO,CAACQ,GAAR,CAAYC,MAAM,IAAIA,MAAM,CAACC,MAA7B,CAAD,CAAP;QACAjB,eAAe,CAAC,KAAD,CAAf;MACA;;MACDG,SAAS,CAACP,aAAD,CAAT;IACA,CArBD,CAqBE,OAAOsB,KAAP,EAAc;MACfpB,aAAa,CAACoB,KAAD,CAAb;IACA;EACD,CAzBQ,EAyBN,CAACtB,aAAD,CAzBM,CAAT;EA2BA,OAAO;IACNC,UADM;IAENE,YAFM;IAGNE,IAHM;IAINC;EAJM,CAAP;AAMA;;GAtCQR,oB;;AAwCT,SAASyB,YAAT,CAAsBC,SAAtB,EAAiCC,YAAjC,EAA+C;EAAA;;EAC9C;EACA,MAAM,CAACC,eAAD,EAAkBC,kBAAlB,IAAwC/B,QAAQ,CAAC,KAAD,CAAtD;EACA,MAAM,CAACgC,aAAD,EAAgBC,gBAAhB,IAAoCjC,QAAQ,CAAC,KAAD,CAAlD,CAH8C,CAI9C;;EACA,MAAMkC,aAAa,GAAG,OAAOtB,GAAP,EAAYuB,YAAZ,KAA6B;IAClDJ,kBAAkB,CAAC,IAAD,CAAlB;;IACA,IAAI;MACF,MAAMf,QAAQ,GAAG,MAAMC,KAAK,CAACL,GAAD,EAAM;QAClCwB,MAAM,EAAE,MAD0B;QAElCC,IAAI,EAAC,MAF6B;QAGlCxB,OAAO,EAAE;UACR,gBAAgB,kBADR;UAER,UAAU;QAFF,CAHyB;QAOlCyB,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeL,YAAf;MAP4B,CAAN,CAA5B;MAUD,MAAMjB,YAAY,GAAG,MAAMF,QAAQ,CAACG,IAAT,EAA3B;MACAU,YAAY,CAACX,YAAD,CAAZ;IACA,CAbD,CAaE,OAAOQ,KAAP,EAAc;MACfO,gBAAgB,CAACP,KAAD,CAAhB;IACA;;IACDK,kBAAkB,CAAC,KAAD,CAAlB;EACA,CAnBD;;EAqBA,OAAO;IACND,eADM;IAENE,aAFM;IAGNE;EAHM,CAAP;AAKA;;IA/BQP,Y;;AAkCT,SAASzB,oBAAT,EAA+ByB,YAA/B"},"metadata":{},"sourceType":"module"}